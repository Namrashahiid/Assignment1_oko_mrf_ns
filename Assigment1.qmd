---
title: "Assignment (Data and Descriptive)"
editor: visual
author: Namra Shahid & Marit Rygg Fredheim
csl: apa-no-ampersand.csl
format: 
  html: 
    code-fold: true
---

## Introduction:

In this assignment we are going to Calculate GDP per capita for 8 subset of countries sub-regional (NUTS3).
We are group two and will therefore examine these countries:

-   Ireland (IE)

-   Poland (PL)

-   Spain (ES)

-   Slovania (SI)

-   Netherlands (NL)

-   Greece (EL)

-   Norway (NO)

-   Albania (AL

## Data:

The main purpose to study this dataset from Eurostat is to analyse regional inequality.
To do so we have to use GDP (Gross Domestic Product), at the market and population data by NUTS 3 regions.

## Sub-national GDP

```{r, echo = FALSE}
library(tidyverse)
library(vtable)
library(dineq)
library(dplyr)
library(magrittr)
library(readr)
library(rio)
```

Files "Nama_10r_3gdp.csv" and "demo_r\_pjanaggr3.csv" are different dataset.
We will work with these two dataset throghout this assignment.

When it comes to what these dataset contains, it is data for GDP on nuts 3 level for different countries.
We find different data in the columns of the dataset of "Nama_10r_3gdp.csv".
This dataset contains data on Nuts 3 level.

We are also using dataset: "Demo_r\_pjanaggr3.csv".
This dataset contains data for population data on Nuts 3 level.

```{r}
#Import data from Eurostat
gdpfile <- import("nama_10r_3gdp.csv")
popfile <- import("demo_r_pjanaggr3.csv")

#Clean data 
gdpfile %<>% select(unit, geo, TIME_PERIOD, OBS_VALUE)
popfile %<>% select(unit, geo, TIME_PERIOD, OBS_VALUE)

# Filter for the countries we are going to study and change variablenames
gdpdata <- filter(gdpfile,unit == "MIO_EUR" & (grepl('IE...', geo) | grepl('PL...', geo) | grepl('ES...', geo) | grepl('SI...', geo) | grepl('NL...', geo) | grepl('ES...', geo) | grepl('NO...', geo) | grepl('AL...', geo))) %>%
  mutate(gdp_n3 = OBS_VALUE, year = TIME_PERIOD, id_nuts3 = geo) %>%
  select(gdp_n3, year, id_nuts3)

# Filter for gdp per capita
popdata <- filter(popfile,unit == "NR") %>% 
  mutate(pop = OBS_VALUE, year = TIME_PERIOD, id_nuts3 = geo) %>%
  select(pop, year, id_nuts3)

#Generate main data frame
tmp <- merge(popdata, gdpdata, by = c("year", "id_nuts3"))

#Gen Nuts 2 id
tmp %<>%
  mutate(id_nuts2 = substr(id_nuts3,1,4))

#Gen Nuts 1 id
tmp %<>%
  mutate(id_nuts0 = substr(id_nuts3,1,2))
```

### GDP per capita calculation:

Like mentioned in this assignment we will use GDP per capita and which is based on population by NUTS.

One important thing to come up here with is that, we calculate GDP per capita by using this formula:

![](images/paste-1EADC664.png){width="253"}

We are here calcualting GDP per capita:

Statistically explained:

**y*i* = GDP*i*/ population*i***

```{r}
# Calculate GDP per capita
tmp %<>%
  mutate(GDP_capita = (gdp_n3 * 1000000)/pop)
```

```{r}
tmp_gdpcapita <- tmp %>%
  select(year, id_nuts3, pop, GDP_capita)
#na.omit(tmp_gdpcapita)
```

### Describe the data (GDP per capita) using the meta data description from Eurostat:

What we can describe out from our data (GDP per capita) using meta data description is that the GDP measures the value of total final output.
Now the question is how does GDP per capita calculated?
To answer this, we can look at the formula over.

Metadata can be defined as information that is needed to be able to use and intercepted statistics.
Main function of metadata is to explain data by giving definition of for example according to our data, region, year, GDP, population, GDP capita.

We have now information of GDP per capita of different regions.

```{r}
# Report the essential descriptive statistics 
# for you data set (Mean, Min, Max,..:)
tmp %>% 
  filter(year == 2010) %>%
  select(id_nuts3, pop, GDP_capita) %>% 
  # . to stop RStudio complaining about no data
  st()
```

When we look at this table we can see is: deceptive statistics of data, we see data of different regions.

When we see the Summay statistics, we can see different type of data, which is first of all: Variables such as: year, pop, GDP_capita.
After that we find N Mean.
When we look at the difference between the statistics such as Max and Min, and if we compare both variables, there is no such major difference between the numbers.
This is quite sensible.

```{r}
tmp %>%  distinct(id_nuts0, year,.keep_all=TRUE) %>% 
  ggplot(aes(x = year, y = GDP_capita, fill = id_nuts0, color = id_nuts0)) +
  geom_line(lwd = .8) +
   labs(x = "Year", y = "GDP per capita")
```

***Graph: 1***

When we look at graph 1, we can see that Norway´s GDP are on the top (the blue line on top. Norway have the highest GDP per capita. Albania on the other side have the lowest GDP per capita. Orange line is refering Albania´s GDP per capita. If we compare Norway´s GDP with Albania´s. There is huge difference there, because Norway is on the top and Albania on the other side at it´s lowest.

```{r}
tmp_1 <- tmp %>% 
  filter(year == 2010) %>%  select(GDP_capita, id_nuts3) %>% 
  slice_min(GDP_capita, n = 10) %>%  select(id_nuts3)

tmp %>%   
  filter(id_nuts3 %in% tmp_1 $ id_nuts3) %>% 
  ggplot(aes(x = year, y = GDP_capita, fill = id_nuts3, color = id_nuts3)) +
  geom_line(lwd = .8) +
   labs(x = "Year", y = "GDP per capita")
```

Polske regioner!

```{r}
tmp_1 <- tmp %>% 
  filter(year==2010) %>%  
  select(GDP_capita, id_nuts3)  %>% 
  slice_max(GDP_capita, n = 10) %>%  
  select(id_nuts3)

tmp %>%   
  filter(id_nuts3 %in% tmp_1$id_nuts3) %>% 
  ggplot(aes(x = year, y = GDP_capita, fill = id_nuts3, color = id_nuts3)) +
  geom_line(lwd = .8) +
   labs(x = "Year", y = "GDP per capita")
```

## Individual country cases

With this GDP per capita for specific countries we can filter our information/data easily afterwards in this assignment.
This can for example be done by finding the wealthiest and not wealthiest regions.

### GDP per capita for Norway:

```{r}
tmp %>%
  filter(id_nuts0 == "NO" , year == 2010) %>%
  select(gdp_n3, pop, GDP_capita) %>%
  st()
```

When we look at the GDP per capita for Norway, we can see that there is big difference between........

### GDP per capita for Spain:

```{r}
tmp %>%
  filter(id_nuts0 == "ES" , year == 2010) %>%
  select(id_nuts3, GDP_capita) %>%
  slice_max(GDP_capita, n = 3)
```

When we look at this GDP_capita formula up, we find 3 least wealthiest Spain.....

### 

```{r}
tmp %>%
  filter(id_nuts0 == "ES" , year == 2010) %>%
  select(id_nuts3, GDP_capita) %>%
  slice_min(GDP_capita, n = 3)
```

When we see the GDP_capita

### GDP per capita for another country: 

..............

## Regional inequity masseurs

-   Generelt om GINW

```{r}
#gen weighted gini
#for all
gini.wtd(tmp$GDP_capita, w = tmp$pop)

tmp  %<>% 
  group_by(id_nuts2, year) %>% 
  mutate(gini_n2 = gini.wtd(GDP_capita, w = pop)) %>%
  ungroup() # to remove grouping
```

## Descriptive statistics Gini

### Cross country perspective

Tekst

```{r}
tmp %>% 
  filter(year == 2010) %>%  
  distinct(id_nuts2, year,.keep_all = TRUE) %>%  
  select(gini_n2) %>%  
  st()
```

Forklare data over

(ikkje ES under kun brukt som eksempel no)

```{r}
tmp %>%
  filter(id_nuts0 == "ES")  %>% 
  distinct(id_nuts2, year,.keep_all = TRUE) %>% 
  ggplot(aes(x = year, y = gini_n2, fill = id_nuts2, color = id_nuts2)) +
  geom_point(lwd = .8) +
   labs(x = "Year", y = "Gini")
```

## Outlier discussion

Tekst

```{r}
ggplot(tmp, aes(x = id_nuts0, y = gini_n2)) +
  geom_point()
```

## Discuss briefly if there are noteworthy outliers:

An important thing to come up here is that an outlier is a value or an observation that is distant from another observations, that is to say, a data point that differs significantly from other observations.

An observation must always be compared to other observations made on the same phenomenon.
In this assignment the focus is gdp per capita and gdp.

#### Appendix

Feks.
eventuelle tabeller som me ikkje vil ha lenger oppe.

#### References

::: {#refs}
:::

#### Footnotes (visst me trenge det)

#### 
