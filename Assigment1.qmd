---
title: "Assignment 1 (Data and Descriptive)"
format: pdf
editor: visual
author: Namra Shahid
author2: Marit Rygg Fredheim
csl: apa-no-ampersand.csl
---

## Introduction:

In this assignment we are going to Calculate GDP per capita for 8 subset of countries sub-regional (NUTS3).
We are group two and will therefore examine these countries:

-   Ireland (IE)

-   Poland (PL)

-   Spain (ES)

-   Slovania (SI)

-   Netherlands (NL)

-   Greece (EL)

-   Norway (NO)

-   Albania (AL

## Data:

The main purpose to study this dataset from Eurostat is to analyse regional inequality.
To do so we have to use GDP (Gross Domestic Product), at the market and population data by NUTS 3 regions.

Like mentioned in this assignment we will use GDP per capita and which is based on population by NUTS.

One important thing to come up here with is that, we calculate GDP per capita by using this formula:

![](images/paste-1EADC664.png){width="253"}

## Sub-national GDP

```{r, echo = FALSE}
library(tidyverse)
library(vtable)
library(dineq)
library(dplyr)
library(magrittr)
library(readr)
library(rio)
```

```{r}
#Import data from Eurostat
gdpdata <- import("nama_10r_3gdp.csv")
popdata <- import("demo_r_pjanaggr3.csv")

#Clean data 
gdpdata %<>% select(unit, geo, TIME_PERIOD, OBS_VALUE)
popdata %<>% select(unit, geo, TIME_PERIOD, OBS_VALUE)

# Filter for the countries we are going to study and change variablenames
gdp <- filter(gdpdata,unit == "MIO_EUR" & (grepl('IE...', geo) | grepl('PL...', geo) | grepl('ES...', geo) | grepl('SI...', geo) | grepl('NL...', geo) | grepl('ES...', geo) | grepl('NO...', geo) | grepl('AL...', geo))) %>%
  mutate(gdp_n3 = OBS_VALUE, year = TIME_PERIOD, id_nuts3 = geo) %>%
  select(gdp_n3, year, id_nuts3)

# Filter for gdp per capita
GDP_capita <- filter(popdata,unit == "NR") %>% 
  mutate(pop = OBS_VALUE, year = TIME_PERIOD, id_nuts3 = geo) %>%
  select(pop, year, id_nuts3)

#Generate main data frame
tmp <- merge(GDP_capita, gdp, by = c("year", "id_nuts3"))

# Calculate GDP per capita
tmp %<>%
  mutate(GDP_capita = (gdp_n3 * 1000000)/pop)

#Gen Nuts 2 id
tmp %<>%
  mutate(id_nuts2 = substr(id_nuts3,1,4))

#Gen Nuts 1 id
tmp %<>%
  mutate(id_nuts0 = substr(id_nuts3,1,2))
```

Files "Nama_10r_3gdp.csv" and "demo_r\_pjanaggr3.csv" are different dataset.
We will work with these two dataset throghout this assignment.

When it comes to what these dataset contains, it is data for GDP on nuts 3 level for different countries.
We find different data in the columns of the dataset of "Nama_10r_3gdp.csv".
This dataset contains data on Nuts 3 level.

We are also using dataset: "Demo_r\_pjanaggr3.csv".
This dataset contains data for population data on Nuts 3 level.

### GDP per capita calculation:

We are here calcualting GDP per capita:

Statistically explained:

**y*i*= GDP*i*/ population*i***

```{r}
tmp_gdpcapita <- tmp %>%
  select(year, id_nuts3, pop, GDP_capita)
na.omit(tmp_gdpcapita)
```

### Describe the data (GDP per capita) using the meta data description from Eurostat:

What we can describe out from our data (GDP per capita) using meta data description is that the GDP measures the value of total final output.
Now the question is how does GDP per capita calculated?
To answer this, we can look at the formula over.

Metadata can be defined as information that is needed to be able to use and intercepted statistics.
Main function of metadata is to explain data by giving definition of for example according to our data, region, year, GDP, population, GDP capita.

When we talk about the table, what we can find is

### 

Report the essential descriptive statistic

```{r}
# Report the essential descriptive statistics 
# for you data set (Mean, Min, Max,..:)
tmp_gdpcapita %>% 
  select(year, id_nuts3, pop, GDP_capita) %>% 
  # . to stop RStudio complaining about no data
  vtable::st(.)
```

## Regional inequity

```{r}
# Calculate GDP per capita for NUTS2
tmp_n2 <- tmp %>%
  #combine gdpr data with population data with 
  # the same year and country
  select(year, id_nuts2, pop) %>% 
  mutate(
    GDP_capita_n2 = (id_nuts2 * 1000000)/pop
  )

```

### Essential descriptive statistics for NUTS2

```{r}
# Report the essential descriptive statistics 
# for you data set (Mean, Min, Max,..:)
tmp_ginie %>% 
  select(GDP, Population) %>% 
  # . to stop RStudio complaining about no data
  vtable::st(.)
```

```{r}
kable(summary(tmp_ginie[,3:5]))
```

```{r}
tmp_ginie$GDP_capita <- as.numeric(tmp_ginie$GDP_capita)
tmp_ginie$Population <- as.numeric(tmp_ginie$Population)
```

```{r}
gini.wtd(tmp_ginie$GDP_capita, weights = tmp_ginie$Population)
```

```{r}
tmp_ginie <- tmp_ginie %>%
  mutate(NUTS2 = substr(tmp_ginie$Region,1,4))

tmp_ginie <- tmp_ginie %>%
  mutate(NUTS = substr(tmp_ginie$Region,1,2))

na.omit(tmp_ginie)

tmp_ginie %>% 
  group_by(NUTS2) %>%
  na.exclude(tmp_ginie) %>%
  mutate(GINI_NUTS2 = gini.wtd(GDP_capita, weigths = Population)) %>%
  ungroup()
```

```{r}
kable(summary(tmp_ginie[8]))
```

```{r}
ggplot(data = tmp_ginie) + geom_density(aes(x = GINI_NUTS2), 
fill = "maroon", col = "maroon", alpha = 0,2) + theme_bw()
```

## Discuss briefly if there are noteworthy outliers:

An important thing to come up here is that an outlier is a value or an observation that is distant from another observations, that is to say, a data point that differs significantly from other observations.

An observation must always be compared to other observations made on the same phenomenon.
In this assignment the focus is gdp per capita and gdp.

```{r}
#data %>% filer(id_nuts0=="FR") %>% 
  #distinct(id_nuts, year,.keep_all=TRUE) %>% 
  #ggplot(aes(x = year, y=gini_n2, fill=id_nuts2, coloR=id_nuts2)) + 
  #geom_point(lwd = .8) + 
  #labs(x = "Year", y = "Gini")
```

```{r}
data %>%
  filter(id_nuts0=="DE" , year==2010) %>%
  select(id_nuts3, gdp_pc_n3) %>%
  slice_min(gdp_pc_n3, n=3)
```
